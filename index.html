<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Master Debug</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #111;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
    }
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .tab-button {
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      background: #333;
      color: white;
      cursor: pointer;
    }
    .tab-button.active { background: #666; }
    .dice-content { display: none; }
    .dice-content.active { display: block; }
    .dice-scene { width: 300px; height: 300px; }
    .log-btn {
      margin-top: 10px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      background: #444;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üé≤ Debug —Ä–µ–∂–∏–º –∫—É–±–∏–∫–æ–≤</h1>
  <p>–ö—Ä—É—Ç–∏ –º—ã—à–∫–æ–π –∫—É–±–∏–∫ ‚Üí –Ω–∞–∂–º–∏ ¬´–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏¬ª ‚Üí —Å–º–æ—Ç—Ä–∏ —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª–∏</p>

  <div class="tabs">
    <button class="tab-button" data-tab="d4">D4</button>
    <button class="tab-button" data-tab="d6">D6</button>
    <button class="tab-button" data-tab="d8">D8</button>
    <button class="tab-button" data-tab="d10">D10</button>
    <button class="tab-button" data-tab="d12">D12</button>
    <button class="tab-button" data-tab="d20">D20</button>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
  <div class="dice-content" id="d4-content">
    <div class="dice-scene"><canvas id="d4-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d4')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>
  <div class="dice-content" id="d6-content">
    <div class="dice-scene"><canvas id="d6-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d6')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>
  <div class="dice-content" id="d8-content">
    <div class="dice-scene"><canvas id="d8-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d8')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>
  <div class="dice-content" id="d10-content">
    <div class="dice-scene"><canvas id="d10-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d10')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>
  <div class="dice-content" id="d12-content">
    <div class="dice-scene"><canvas id="d12-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d12')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>
  <div class="dice-content" id="d20-content">
    <div class="dice-scene"><canvas id="d20-canvas"></canvas></div>
    <button class="log-btn" onclick="logRotation('d20')">–õ–æ–≥ –ø–æ–∑–∏—Ü–∏–∏</button>
  </div>

  <script>
    const diceColors = {
      d4:'#FF6B6B', d6:'#4ECDC4', d8:'#FFD93D',
      d10:'#6BCF7F', d12:'#9B59B6', d20:'#3498DB'
    };

    class DebugDice {
      constructor(canvasId, type) {
        this.canvas = document.getElementById(canvasId);
        this.type = type;
        this.scene = new THREE.Scene();
        this.camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
        this.camera.position.z = 6;

        this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias:true, alpha:true });
        this.renderer.setSize(300,300);

        this.scene.add(new THREE.AmbientLight(0xffffff,0.5));
        const dl = new THREE.DirectionalLight(0xffffff,0.7);
        dl.position.set(3,5,5);
        this.scene.add(dl);

        const material = new THREE.MeshPhongMaterial({ color: diceColors[type] });
        const geometry = this.getGeometry(type);
        this.dice = new THREE.Mesh(geometry, material);
        this.scene.add(this.dice);

        // üëá —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à–∫–æ–π
        this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);

        this.animate();
      }
      getGeometry(type){
        switch(type){
          case 'd4': return new THREE.TetrahedronGeometry(2.5);
          case 'd6': return new THREE.BoxGeometry(2.5,2.5,2.5);
          case 'd8': return new THREE.OctahedronGeometry(2.5);
          case 'd10': return new THREE.DodecahedronGeometry(2.3);
          case 'd12': return new THREE.DodecahedronGeometry(2.5);
          case 'd20': return new THREE.IcosahedronGeometry(2.5);
        }
      }
      animate(){
        requestAnimationFrame(()=>this.animate());
        this.controls.update();
        this.renderer.render(this.scene,this.camera);
      }
    }

    let diceInstances = {};
    function initDice(){
      ['d4','d6','d8','d10','d12','d20'].forEach(type=>{
        diceInstances[type] = new DebugDice(`${type}-canvas`, type);
      });
    }

    function logRotation(type){
      if(diceInstances[type]){
        const r = diceInstances[type].dice.rotation;
        console.log(`${type} –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è:`, {x:r.x.toFixed(4), y:r.y.toFixed(4), z:r.z.toFixed(4)});
      }
    }

    // –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tab-button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.dice-content').forEach(c=>c.classList.remove('active'));
        document.getElementById(btn.dataset.tab+'-content').classList.add('active');
      });
    });

    initDice();
    // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º d6
    document.querySelector('[data-tab="d6"]').click();
  </script>
</body>
</html>























